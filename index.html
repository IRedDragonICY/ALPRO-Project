<!DOCTYPE html>
<html>
  <head>
    <title>Chess</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="./lib/CSS/board.css" />
    <script src="./lib/js/chess.js"></script>
    <style>
      body {
        margin: 0;
        padding: 0;
        font-family: Arial, sans-serif;
        background-color: #f2f2f2;
      }


      .container { 
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        height: 100vh;
        background-color: #f2f2f2;
      }

      h1 {
        margin: 0;
        font-size: 48px;
        text-align: center;
        color: #333;
      }

      .exit {
        position: absolute;
        top: 10px;
        left: 10px;
        background-color: #333;
        color: #fff;
        padding: 5px 10px;
        border-radius: 5px;
        cursor: pointer;
      }

      .exit:hover {
        background-color: #555;
      }

      .menu {
        display: flex;
        flex-direction: column;
        align-items: center;
        margin-top: 20px;
      }
        .menu > div:hover {
            transform: scale(1.1);
        }

      .menu > div {
        margin-bottom: 10px;
        cursor: pointer;
      }

      .slider-container {
        display: flex;
        align-items: center;
        justify-content: center;
        margin-top: 20px;
      }

      .slider {
        width: 200px;
        margin-left: 10px;
      }

      #version {
        position: absolute;
        bottom: 10px;
        right: 10px;
        font-size: 12px;
        color: #333;
      }
    </style>
  </head>
  <body onload="loadSettings()">
    <audio src="./lib/audio/background-music.mp3" autoplay loop></audio>
    <div class="container">
      <div class="box">
        <h1>Chess</h1>
        <div class="menu">
          <div onclick="startGame('ai')">Player Vs AI</div>
          <div onclick="startGame('player')">Player Vs Player</div>
          <div onclick="showSettings()">Settings</div>
        </div>
        <div id="version">
          <p>Version 0.0.1 Alpha</p>
        </div>
      </div>
    </div>

    <script>
        // JavaScript code for chess game logic
        const colors = {
          red: { light: "#ffcccc", dark: "#cc0000" },
          yellow: { light: "#ffffcc", dark: "#cccc00" },
          green: { light: "#ccffcc", dark: "#00cc00" },
          blue: { light: "#ccccff", dark: "#0000cc" },
          purple: { light: "#ffccff", dark: "#cc00cc" },
          brown: { light: "#d2b48c", dark: "#8b4513" },
          black: { light: "#c0c0c0", dark: "#000000" }
        };
      
        let lightColor = "#f2f2f2";
        let darkColor = "#333";
  
        function loadSettings() {
          const savedBoardColor = localStorage.getItem("boardColor");
          const savedDarkMode = localStorage.getItem("darkMode");
          const savedVolume = localStorage.getItem("volume");
      
          if (savedBoardColor) {
            const color = colors[savedBoardColor];
            lightColor = color.light;
            darkColor = color.dark;
          }
      
          if (savedDarkMode) {
            document.body.style.backgroundColor = savedDarkMode === "true" ? darkColor : lightColor;
          }
      
          if (savedVolume) {
            document.querySelector("audio").volume = savedVolume;
          }
        }
      
        function showMenu() {
          const container = document.querySelector(".container");
          container.innerHTML = `
            <div class="box">
              <h1>Chess</h1>
              <div class="menu">
                <div onclick="startGame('ai')">Player Vs AI</div>
                <div onclick="startGame('player')">Player Vs Player</div>
                <div onclick="showSettings()">Settings</div>
                <div id="version">
                  <p>Version 0.0.1 Alpha</p>
                </div>
              </div>
            </div>
          `;
        }
      
        function showSettings() {
          const container = document.querySelector(".container");
          container.innerHTML = `
            <div class="box">
              <h1>Settings</h1>
              <div class="color-container">
                <label for="boardColor">Change Board Color:</label>
                <select id="boardColor">
                  <option value="red">Red</option>
                  <option value="yellow">Yellow</option>
                  <option value="green">Green</option>
                  <option value="blue">Blue</option>
                  <option value="purple">Purple</option>
                  <option value="brown">Brown</option>
                  <option value="black">Black</option>
                </select>
              </div>
              <div class="slider-container">
                <label for="volume">Change Volume:</label>
                <input type="range" id="volume" class="slider" min="0" max="1" step="0.1" value="0.5">
              </div>
              <div class="toggle-container">
                <label for="darkMode">Dark Mode:</label>
                <input type="checkbox" id="darkMode" class="toggle">
              </div>
              <div class="menu">
                <div onclick="showMenu()">Back</div>
              </div>
            </div>
          `;
      
          const darkModeToggle = document.querySelector("#darkMode");
          const volumeSlider = document.querySelector("#volume");
          const boardColorSelect = document.querySelector("#boardColor");
          const audio = document.querySelector("audio");
      
          darkModeToggle.checked = localStorage.getItem("darkMode") === "true";
          volumeSlider.value = localStorage.getItem("volume") || 0.5;
          boardColorSelect.value = localStorage.getItem("boardColor") || "black";
      
          darkModeToggle.addEventListener("change", () => {
            document.body.style.backgroundColor = darkModeToggle.checked ? darkColor : lightColor;
            localStorage.setItem("darkMode", darkModeToggle.checked);
          });
      
          volumeSlider.addEventListener("input", () => {
            audio.volume = volumeSlider.value;
            localStorage.setItem("volume", volumeSlider.value);
          });
      
          boardColorSelect.addEventListener("change", () => {
            const color = colors[boardColorSelect.value];
            lightColor = color.light;
            darkColor = color.dark;
      
            document.querySelectorAll(".square").forEach((square, index) => {
              square.style.backgroundColor = (Math.floor(index / 8) + index) % 2 === 0 ? lightColor : darkColor;
            });
      
            localStorage.setItem("boardColor", boardColorSelect.value);
          });
      
          boardColorSelect.dispatchEvent(new Event("change"));
        }
        const audio = document.querySelector("audio");

        window.addEventListener("load", loadSettings);
      </script>
  </body>
</html>
